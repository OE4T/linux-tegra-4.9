/*
 * tegra186-vcm31-p2379-common.dtsi: VCM3.1 based P2379(DPX2)
 * common dtsi.
 *
 * Copyright (c) 2016, NVIDIA CORPORATION.  All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; version 2 of the License.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 */

#include <dt-bindings/types.h>
#include <dt-bindings/input/atmel_mxt_ts.h>
/dts-v1/;

/memreserve/ 0x80000000 0x00010000;

#include "tegra186-platforms/tegra186-vcm31.dtsi"
#include "tegra186-platforms/tegra186-vcm31-power-tree-p2379-0000-c00-00.dtsi"

/ {
        model = "p2379_t186";
        compatible = "nvidia,p2379_t186", "nvidia,tegra186";

        nvidia,dtbbuildtime = __DATE__, __TIME__;
        #address-cells = <2>;
        #size-cells = <2>;

	pmc@c360000 {
		io-pad-defaults {
			sdmmc1-hv {
				nvidia,enable-dynamic-pad-voltage;
			};

			sdmmc3-hv {
				nvidia,enable-dynamic-pad-voltage;
			};
		};
	};

	serial@3100000 { /* Tegra UARTA */
		status = "disabled";
	};

	spi@3210000 { /* Tegra SPI1 <-> VCM SPIB: Inter Tegra Master */
		status = "okay";
		spi@0 {
			compatible = "spidev";
			reg = <0>;
			spi-max-frequency = <25000000>;
		};
	};

	spi@c260000 { /* Tegra SPI2 <-> VCM SPIA: Aurix slave */
		compatible = "nvidia,tegra186-spi-slave";
		status = "okay";
		spi@0 {
			compatible = "spidev";
			reg = <0>;
			spi-max-frequency = <25000000>;
		};
	};

	spi@3230000 { /* Tegra SPI3 <-> VCM SPID: Inter Tegra slave*/
		status = "okay";
		compatible = "nvidia,tegra186-spi-slave";
		spi@0 {
			compatible = "spidev";
			reg = <0>;
			spi-max-frequency = <25000000>;
		};
	};

	i2c@3160000 { /* Tegra I2C1 - VCM I2CA: Temp sensor */
		clock-frequency = <400000>;
		status = "okay";
	};

	i2c@c240000 { /* Tegra I2C2 <-> VCM I2CB: CSI E-F */
		clock-frequency = <400000>;
		status = "okay";
	};

	i2c@3180000 { /* Tegra I2C3 - VCM I2CD: CSI C-D */
		clock-frequency = <400000>;
		status = "okay";
	};

	i2c@31c0000 { /* Tegra I2C7 - MID DPX2 I2CE: DSI to LVDS*/
		clock-frequency = <400000>;
		status = "okay";
	};

	i2c@c250000 { /* Tegra I2C8 <-> VCM I2CC: CSI A-B */
		clock-frequency = <400000>;
		status = "okay";
	};

        sdhci@3460000 { /* SDMMC_D: Used for eMMc */
                        status = "okay";
                        uhs-mask = <0x40>;   /*HS400 is not supported*/
        };

	padctl_uphy: pinctrl@3520000 {
		status = "okay";
		pinctrl-0 = <&p2379_uphy_default>;
		pinctrl-names = "default";
		p2379_uphy_default: pinmux {
			usb2-ftdi-hub-port1 {
				nvidia,lanes = "otg-0";
				nvidia,function = "xusb";
				nvidia,port-cap = <TEGRA_PADCTL_PORT_OTG_CAP>;
			};
			usb2-std-A-port1 {
				nvidia,lanes = "otg-2";
				nvidia,function = "xusb";
				nvidia,port-cap = <TEGRA_PADCTL_PORT_HOST_ONLY>;
			};
			usb3-std-A-port1 {
				nvidia,lanes = "uphy-lane-0";
				nvidia,function = "usb3";
				nvidia,usb3-port = <0>;
				nvidia,port-cap = <TEGRA_PADCTL_PORT_HOST_ONLY>;
			};
			pcie {
				nvidia,lanes = "uphy-lane-1", "uphy-lane-2", "uphy-lane-3", "uphy-lane-4";
				nvidia,function = "pcie";
				nvidia,pcie-controller = <0>;
			};
		};
	};

	external-connection {
		/* P2379 doesn't have ID/VBUS detection */
		id_gpio_extcon: extcon@0 {
			status="okay";
			compatible = "extcon-gpio";
			extcon-gpio,name = "USB-ID";
			extcon-gpio,cable-name = "USB-Host";
			#extcon-cells = <1>;
		};
		vbus_gpio_extcon: extcon@1 {
			status="okay";
			compatible = "extcon-gpio";
			extcon-gpio,name = "USB-VBUS";
			extcon-gpio,default-connected;
			extcon-gpio,cable-name = "USB";
			#extcon-cells = <1>;
		};
	};

	mailbox@3538000 {
		status = "okay";
	};

	xudc@3550000 {
		status = "okay";
		extcon-cables = <&vbus_gpio_extcon 0>;
		extcon-cable-names = "vbus";
		#extcon-cells = <1>;
		phys = <&padctl_uphy TEGRA_PADCTL_UPHY_UTMI_P(0)>;
		phy-names = "usb2";
	};

	xhci@3530000 {
		status = "okay";
		extcon-cables = <&id_gpio_extcon 0>;
		extcon-cable-names = "id";
		#extcon-cells = <1>;
		phys = <&padctl_uphy TEGRA_PADCTL_UPHY_UTMI_P(2)>,
			<&padctl_uphy TEGRA_PADCTL_UPHY_USB3_P(0)>;
		phy-names = "utmi-2", "usb3-0";
	};

	pcie-controller@10003000 {
		/*
		 * Even though the board is using PCIe root ports in  4_0_0
		 * configuration, we have to provide 4_0_1 to the driver.
		 * as driver only support following configs
		 * 1. X4_X0_X1
		 * 2. X2_X1_X1
		 * 3. X1_X1_X1
		 */
		nvidia,lane-map = <0x401>;
		status = "okay";
		pci@1,0 {
			status = "okay";
			nvidia,num-lanes = <0x4>;
		};

		pci@2,0 {
			status = "disabled";
		};
	};

	ahub {
		status = "disabled";
	};

	adma@2930000{
		status = "disabled";
	};

        adsp_audio {
		status = "disabled";
        };

	spdif-dit.0@0 {
		status = "disabled";
        };

	spdif-dit.1@1 {
		status = "disabled";
        };

	spdif-dit.2@2 {
		status = "disabled";
        };

	spdif-dit.3@3 {
		status = "disabled";
        };

	/* FIXME: not implement yet */
	isc-mgr.0 {
		status = "disabled";
	};

	/* FIXME: not implement yet */
	isc-mgr.1 {
		status = "disabled";
	};

	/* FIXME: not implement yet */
	isc-mgr.2 {
		status = "disabled";
	};

	sdhci@3400000 {
		status = "disabled";
	};

	sdhci@3440000 {
		status = "disabled";
	};

        ptm_a57_0: ptm@9840000 {
                status = "okay";
        };

        ptm_a57_1: ptm@9940000 {
                status = "okay";
        };

        ptm_a57_2: ptm@9a40000 {
                status = "okay";
        };

        ptm_a57_3: ptm@9b40000 {
                status = "okay";
        };

        funnel_bccplex@9010000 {
                status = "okay";
        };

        funnel_major@8010000 {
                status = "okay";
        };

        replicator@0x8040000 {
                status = "okay";
        };

        etf@8030000 {
                status = "okay";
        };

        tpiu@8060000 {
                status = "okay";
        };

	pmc-iopower {
		status = "disabled";
	};

	host1x {
		status = "disabled";
		ctx0 {
			status = "disabled";
		};

		ctx1 {
			status = "disabled";
		};

		ctx2 {
			status = "disabled";
		};

		ctx3 {
			status = "disabled";
		};

		ctx4 {
			status = "disabled";
		};

		ctx5 {
			status = "disabled";
		};

		ctx6 {
			status = "disabled";
		};

		ctx7 {
			status = "disabled";
		};

		nvcsi@150c0000 {
			status = "disabled";
		};

		vi@15700000 {
			status = "disabled";
		};

		isp@15600000 {
			status = "disabled";
		};

		vii2c@156c0000 {
			status = "disabled";
		};


		dsi {	/* dsi@15300000 */
			status = "disabled";
		};

		vic@15340000 {
			status = "disabled";
		};

		nvenc@154c0000 {
			status = "disabled";
		};

		nvdec@15480000 {
			status = "disabled";
		};

		nvjpg@15380000 {
			status = "disabled";
		};

		tsec@15500000 {
			status = "disabled";
		};

		tsecb@15100000 {
			status = "disabled";
		};

		se@15810000 {
			status = "disabled";
		};

		se@15820000 {
			status = "disabled";
		};

		se@15830000 {
			status = "disabled";
		};

		se@15840000 {
			status = "disabled";
		};
	};

	bpmp {
		bpmpthermal {
			status = "disabled";
		};
	};

	cpus {
		status = "disabled";

	};

	soft_wdt:soft_watchdog {
		compatible = "softdog-platform";
		status = "okay";
	};
};

